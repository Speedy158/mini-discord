{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ericb\\\\mini-discord\\\\frontend\\\\src\\\\components\\\\VoicePanel.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport socket from \"../socket\";\nimport { useVoiceState } from \"../context/VoiceContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = \"http://localhost:3000\";\nfunction VoicePanel({\n  username\n}) {\n  _s();\n  const [channels, setChannels] = useState([]);\n  const [currentVoiceChannel, setCurrentVoiceChannel] = useState(null);\n  const [speakingUsers, setSpeakingUsers] = useState([]);\n  const [userData, setUserData] = useState(null);\n  const [isMuted, setIsMuted] = useState(false);\n  const [volumeLevel, setVolumeLevel] = useState(0);\n  const voiceState = useVoiceState();\n  const sessionId = localStorage.getItem(\"sessionId\");\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const rafIdRef = useRef(null);\n  const streamRef = useRef(null);\n  useEffect(() => {\n    async function loadChannels() {\n      if (!sessionId) return;\n      try {\n        const res = await fetch(`${API_BASE}/api/channels/list`, {\n          headers: {\n            \"x-session-id\": sessionId\n          }\n        });\n        const data = await res.json();\n        if (data.ok) setChannels(data.channels);\n      } catch (err) {\n        console.error(\"Fehler beim Laden der Channels (Voice):\", err);\n      }\n    }\n    async function loadUser() {\n      try {\n        const res = await fetch(`${API_BASE}/api/users/me`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-session-id\": sessionId\n          }\n        });\n        const data = await res.json();\n        if (data.ok) setUserData(data.user);\n      } catch (err) {\n        console.error(\"Fehler beim Laden des Users:\", err);\n      }\n    }\n    loadChannels();\n    loadUser();\n  }, [sessionId]);\n  useEffect(() => {\n    if (username) {\n      socket.emit(\"registerUser\", {\n        username\n      });\n    }\n    function handleSpeakingStart({\n      user\n    }) {\n      setSpeakingUsers(prev => prev.includes(user) ? prev : [...prev, user]);\n    }\n    function handleSpeakingStop({\n      user\n    }) {\n      setSpeakingUsers(prev => prev.filter(u => u !== user));\n    }\n    socket.on(\"speakingStart\", handleSpeakingStart);\n    socket.on(\"speakingStop\", handleSpeakingStop);\n    return () => {\n      socket.off(\"speakingStart\", handleSpeakingStart);\n      socket.off(\"speakingStop\", handleSpeakingStop);\n    };\n  }, [username]);\n  useEffect(() => {\n    if (currentVoiceChannel) {\n      startMicrophone();\n    } else {\n      stopMicrophone();\n    }\n    return () => {\n      stopMicrophone();\n    };\n  }, [currentVoiceChannel, isMuted]);\n  function startMicrophone() {\n    let source;\n    let dataArray;\n    navigator.mediaDevices.getUserMedia({\n      audio: true\n    }).then(stream => {\n      streamRef.current = stream;\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      audioContextRef.current = audioContext;\n      source = audioContext.createMediaStreamSource(stream);\n      const analyser = audioContext.createAnalyser();\n      analyser.fftSize = 512;\n      analyserRef.current = analyser;\n      const bufferLength = analyser.frequencyBinCount;\n      dataArray = new Uint8Array(bufferLength);\n      source.connect(analyser);\n      const detectSpeech = () => {\n        analyser.getByteFrequencyData(dataArray);\n        const volume = dataArray.reduce((a, b) => a + b, 0) / bufferLength;\n        setVolumeLevel(volume);\n        if (!isMuted && currentVoiceChannel) {\n          if (volume > 20) {\n            startSpeaking();\n          } else {\n            stopSpeaking();\n          }\n        }\n        rafIdRef.current = requestAnimationFrame(detectSpeech);\n      };\n      detectSpeech();\n    }).catch(err => {\n      console.error(\"Mikrofonzugriff fehlgeschlagen:\", err);\n    });\n  }\n  function stopMicrophone() {\n    if (rafIdRef.current) cancelAnimationFrame(rafIdRef.current);\n    if (audioContextRef.current) {\n      audioContextRef.current.close();\n      audioContextRef.current = null;\n    }\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n  }\n  function joinChannel(channel) {\n    if (!username) return alert(\"Kein Username gesetzt.\");\n    socket.emit(\"joinVoiceChannel\", {\n      channel\n    });\n    setCurrentVoiceChannel(channel);\n  }\n  function leaveChannel() {\n    if (!currentVoiceChannel) return;\n    socket.emit(\"leaveVoiceChannel\", {\n      channel: currentVoiceChannel\n    });\n    setCurrentVoiceChannel(null);\n    stopSpeaking();\n  }\n  function startSpeaking() {\n    socket.emit(\"speakingStart\", {\n      channel: currentVoiceChannel\n    });\n  }\n  function stopSpeaking() {\n    socket.emit(\"speakingStop\", {\n      channel: currentVoiceChannel\n    });\n  }\n  function toggleMute() {\n    setIsMuted(prev => {\n      const newState = !prev;\n      if (newState) stopSpeaking();\n      return newState;\n    });\n  }\n  function renderAvatar() {\n    if (!userData) return null;\n    if (userData.avatarType === \"generated\") {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avatar\",\n        style: {\n          backgroundColor: userData.avatarColor || \"#888\",\n          color: \"#fff\",\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          fontWeight: \"bold\",\n          fontSize: \"14px\"\n        },\n        children: userData.avatarLetter || \"?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this);\n    }\n    if (userData.avatarType === \"upload\" && userData.avatarImage) {\n      return /*#__PURE__*/_jsxDEV(\"img\", {\n        src: userData.avatarImage,\n        alt: \"avatar\",\n        className: \"avatar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"avatar\",\n      style: {\n        backgroundColor: \"#666\"\n      },\n      children: \"?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"voice-panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"voice-channels\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"channel-list-header\",\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Voice-Channels\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"channel-list-items\",\n        children: channels.map(ch => {\n          const users = voiceState[ch] || [];\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"channel-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"voice-channel-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: ch\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 19\n              }, this), currentVoiceChannel === ch ? /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: leaveChannel,\n                children: \"Leave\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => joinChannel(ch),\n                children: \"Join\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"voice-channel-users\",\n              children: users.map(u => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"voice-user\" + (speakingUsers.includes(u.username) ? \" voice-user-speaking\" : \"\"),\n                children: u.username\n              }, u.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 17\n            }, this)]\n          }, ch, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this), currentVoiceChannel && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"voice-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleMute,\n          children: isMuted ? \"Unmute\" : \"Mute\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"volume-bar\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"volume-fill\",\n            style: {\n              width: `${Math.min(volumeLevel * 2, 100)}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"voice-user-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"voice-avatar\",\n        children: renderAvatar()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"voice-username\",\n        children: username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this), currentVoiceChannel && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"voice-disconnect\",\n        onClick: leaveChannel,\n        children: \"Disconnect\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, this);\n}\n_s(VoicePanel, \"A3mwZTGQ9JWU4ws2hDap5yWrz5s=\", false, function () {\n  return [useVoiceState];\n});\n_c = VoicePanel;\nexport default VoicePanel;\nvar _c;\n$RefreshReg$(_c, \"VoicePanel\");","map":{"version":3,"names":["React","useEffect","useState","useRef","socket","useVoiceState","jsxDEV","_jsxDEV","API_BASE","VoicePanel","username","_s","channels","setChannels","currentVoiceChannel","setCurrentVoiceChannel","speakingUsers","setSpeakingUsers","userData","setUserData","isMuted","setIsMuted","volumeLevel","setVolumeLevel","voiceState","sessionId","localStorage","getItem","audioContextRef","analyserRef","rafIdRef","streamRef","loadChannels","res","fetch","headers","data","json","ok","err","console","error","loadUser","method","user","emit","handleSpeakingStart","prev","includes","handleSpeakingStop","filter","u","on","off","startMicrophone","stopMicrophone","source","dataArray","navigator","mediaDevices","getUserMedia","audio","then","stream","current","audioContext","window","AudioContext","webkitAudioContext","createMediaStreamSource","analyser","createAnalyser","fftSize","bufferLength","frequencyBinCount","Uint8Array","connect","detectSpeech","getByteFrequencyData","volume","reduce","a","b","startSpeaking","stopSpeaking","requestAnimationFrame","catch","cancelAnimationFrame","close","getTracks","forEach","track","stop","joinChannel","channel","alert","leaveChannel","toggleMute","newState","renderAvatar","avatarType","className","style","backgroundColor","avatarColor","color","display","alignItems","justifyContent","fontWeight","fontSize","children","avatarLetter","fileName","_jsxFileName","lineNumber","columnNumber","avatarImage","src","alt","map","ch","users","onClick","id","width","Math","min","_c","$RefreshReg$"],"sources":["C:/Users/ericb/mini-discord/frontend/src/components/VoicePanel.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport socket from \"../socket\";\r\nimport { useVoiceState } from \"../context/VoiceContext\";\r\n\r\nconst API_BASE = \"http://localhost:3000\";\r\n\r\nfunction VoicePanel({ username }) {\r\n  const [channels, setChannels] = useState([]);\r\n  const [currentVoiceChannel, setCurrentVoiceChannel] = useState(null);\r\n  const [speakingUsers, setSpeakingUsers] = useState([]);\r\n  const [userData, setUserData] = useState(null);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [volumeLevel, setVolumeLevel] = useState(0);\r\n  const voiceState = useVoiceState();\r\n\r\n  const sessionId = localStorage.getItem(\"sessionId\");\r\n  const audioContextRef = useRef(null);\r\n  const analyserRef = useRef(null);\r\n  const rafIdRef = useRef(null);\r\n  const streamRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    async function loadChannels() {\r\n      if (!sessionId) return;\r\n      try {\r\n        const res = await fetch(`${API_BASE}/api/channels/list`, {\r\n          headers: { \"x-session-id\": sessionId }\r\n        });\r\n        const data = await res.json();\r\n        if (data.ok) setChannels(data.channels);\r\n      } catch (err) {\r\n        console.error(\"Fehler beim Laden der Channels (Voice):\", err);\r\n      }\r\n    }\r\n\r\n    async function loadUser() {\r\n      try {\r\n        const res = await fetch(`${API_BASE}/api/users/me`, {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"x-session-id\": sessionId\r\n          }\r\n        });\r\n        const data = await res.json();\r\n        if (data.ok) setUserData(data.user);\r\n      } catch (err) {\r\n        console.error(\"Fehler beim Laden des Users:\", err);\r\n      }\r\n    }\r\n\r\n    loadChannels();\r\n    loadUser();\r\n  }, [sessionId]);\r\n\r\n  useEffect(() => {\r\n    if (username) {\r\n      socket.emit(\"registerUser\", { username });\r\n    }\r\n\r\n    function handleSpeakingStart({ user }) {\r\n      setSpeakingUsers((prev) =>\r\n        prev.includes(user) ? prev : [...prev, user]\r\n      );\r\n    }\r\n\r\n    function handleSpeakingStop({ user }) {\r\n      setSpeakingUsers((prev) => prev.filter((u) => u !== user));\r\n    }\r\n\r\n    socket.on(\"speakingStart\", handleSpeakingStart);\r\n    socket.on(\"speakingStop\", handleSpeakingStop);\r\n\r\n    return () => {\r\n      socket.off(\"speakingStart\", handleSpeakingStart);\r\n      socket.off(\"speakingStop\", handleSpeakingStop);\r\n    };\r\n  }, [username]);\r\n\r\n  useEffect(() => {\r\n    if (currentVoiceChannel) {\r\n      startMicrophone();\r\n    } else {\r\n      stopMicrophone();\r\n    }\r\n\r\n    return () => {\r\n      stopMicrophone();\r\n    };\r\n  }, [currentVoiceChannel, isMuted]);\r\n\r\n  function startMicrophone() {\r\n    let source;\r\n    let dataArray;\r\n\r\n    navigator.mediaDevices\r\n      .getUserMedia({ audio: true })\r\n      .then((stream) => {\r\n        streamRef.current = stream;\r\n        const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n        audioContextRef.current = audioContext;\r\n\r\n        source = audioContext.createMediaStreamSource(stream);\r\n        const analyser = audioContext.createAnalyser();\r\n        analyser.fftSize = 512;\r\n        analyserRef.current = analyser;\r\n\r\n        const bufferLength = analyser.frequencyBinCount;\r\n        dataArray = new Uint8Array(bufferLength);\r\n\r\n        source.connect(analyser);\r\n\r\n        const detectSpeech = () => {\r\n          analyser.getByteFrequencyData(dataArray);\r\n          const volume = dataArray.reduce((a, b) => a + b, 0) / bufferLength;\r\n          setVolumeLevel(volume);\r\n\r\n          if (!isMuted && currentVoiceChannel) {\r\n            if (volume > 20) {\r\n              startSpeaking();\r\n            } else {\r\n              stopSpeaking();\r\n            }\r\n          }\r\n\r\n          rafIdRef.current = requestAnimationFrame(detectSpeech);\r\n        };\r\n\r\n        detectSpeech();\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Mikrofonzugriff fehlgeschlagen:\", err);\r\n      });\r\n  }\r\n\r\n  function stopMicrophone() {\r\n    if (rafIdRef.current) cancelAnimationFrame(rafIdRef.current);\r\n    if (audioContextRef.current) {\r\n      audioContextRef.current.close();\r\n      audioContextRef.current = null;\r\n    }\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach((track) => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n  }\r\n\r\n  function joinChannel(channel) {\r\n    if (!username) return alert(\"Kein Username gesetzt.\");\r\n    socket.emit(\"joinVoiceChannel\", { channel });\r\n    setCurrentVoiceChannel(channel);\r\n  }\r\n\r\n  function leaveChannel() {\r\n    if (!currentVoiceChannel) return;\r\n    socket.emit(\"leaveVoiceChannel\", { channel: currentVoiceChannel });\r\n    setCurrentVoiceChannel(null);\r\n    stopSpeaking();\r\n  }\r\n\r\n  function startSpeaking() {\r\n    socket.emit(\"speakingStart\", { channel: currentVoiceChannel });\r\n  }\r\n\r\n  function stopSpeaking() {\r\n    socket.emit(\"speakingStop\", { channel: currentVoiceChannel });\r\n  }\r\n\r\n  function toggleMute() {\r\n    setIsMuted((prev) => {\r\n      const newState = !prev;\r\n      if (newState) stopSpeaking();\r\n      return newState;\r\n    });\r\n  }\r\n\r\n  function renderAvatar() {\r\n    if (!userData) return null;\r\n\r\n    if (userData.avatarType === \"generated\") {\r\n      return (\r\n        <div\r\n          className=\"avatar\"\r\n          style={{\r\n            backgroundColor: userData.avatarColor || \"#888\",\r\n            color: \"#fff\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            fontWeight: \"bold\",\r\n            fontSize: \"14px\"\r\n          }}\r\n        >\r\n          {userData.avatarLetter || \"?\"}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (userData.avatarType === \"upload\" && userData.avatarImage) {\r\n      return (\r\n        <img\r\n          src={userData.avatarImage}\r\n          alt=\"avatar\"\r\n          className=\"avatar\"\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"avatar\" style={{ backgroundColor: \"#666\" }}>\r\n        ?\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"voice-panel\">\r\n      <div className=\"voice-channels\">\r\n        <div className=\"channel-list-header\">\r\n          <strong>Voice-Channels</strong>\r\n        </div>\r\n        <div className=\"channel-list-items\">\r\n          {channels.map((ch) => {\r\n            const users = voiceState[ch] || [];\r\n            return (\r\n              <div key={ch} className=\"channel-item\">\r\n                <div className=\"voice-channel-header\">\r\n                  <span>{ch}</span>\r\n                  {currentVoiceChannel === ch ? (\r\n                    <button onClick={leaveChannel}>Leave</button>\r\n                  ) : (\r\n                    <button onClick={() => joinChannel(ch)}>Join</button>\r\n                  )}\r\n                </div>\r\n                <div className=\"voice-channel-users\">\r\n                  {users.map((u) => (\r\n                    <div\r\n                      key={u.id}\r\n                      className={\r\n                        \"voice-user\" +\r\n                        (speakingUsers.includes(u.username)\r\n                          ? \" voice-user-speaking\"\r\n                          : \"\")\r\n                      }\r\n                    >\r\n                      {u.username}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {currentVoiceChannel && (\r\n          <div className=\"voice-controls\">\r\n            <button onClick={toggleMute}>\r\n              {isMuted ? \"Unmute\" : \"Mute\"}\r\n            </button>\r\n            <div className=\"volume-bar\">\r\n              <div\r\n                className=\"volume-fill\"\r\n                style={{ width: `${Math.min(volumeLevel * 2, 100)}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"voice-user-info\">\r\n        <div className=\"voice-avatar\">{renderAvatar()}</div>\r\n        <div className=\"voice-username\">{username}</div>\r\n        {currentVoiceChannel && (\r\n          <button className=\"voice-disconnect\" onClick={leaveChannel}>\r\n            Disconnect\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VoicePanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
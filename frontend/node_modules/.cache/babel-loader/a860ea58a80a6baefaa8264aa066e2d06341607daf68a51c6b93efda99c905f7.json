{"ast":null,"code":"import React,{useEffect,useState,useRef}from\"react\";import socket from\"../socket\";import{useVoiceState}from\"../context/VoiceContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE=\"http://localhost:3000\";function VoicePanel(_ref){let{username}=_ref;const[channels,setChannels]=useState([]);const[currentVoiceChannel,setCurrentVoiceChannel]=useState(null);const[speakingUsers,setSpeakingUsers]=useState([]);const[userData,setUserData]=useState(null);const[isMuted,setIsMuted]=useState(false);const[volumeLevel,setVolumeLevel]=useState(0);const voiceState=useVoiceState();const sessionId=localStorage.getItem(\"sessionId\");const audioContextRef=useRef(null);const analyserRef=useRef(null);const rafIdRef=useRef(null);const streamRef=useRef(null);useEffect(()=>{async function loadChannels(){if(!sessionId)return;try{const res=await fetch(\"\".concat(API_BASE,\"/api/channels/list\"),{headers:{\"x-session-id\":sessionId}});const data=await res.json();if(data.ok)setChannels(data.channels);}catch(err){console.error(\"Fehler beim Laden der Channels (Voice):\",err);}}async function loadUser(){try{const res=await fetch(\"\".concat(API_BASE,\"/api/users/me\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"x-session-id\":sessionId}});const data=await res.json();if(data.ok)setUserData(data.user);}catch(err){console.error(\"Fehler beim Laden des Users:\",err);}}loadChannels();loadUser();},[sessionId]);useEffect(()=>{if(username){socket.emit(\"registerUser\",{username});}function handleSpeakingStart(_ref2){let{user}=_ref2;setSpeakingUsers(prev=>prev.includes(user)?prev:[...prev,user]);}function handleSpeakingStop(_ref3){let{user}=_ref3;setSpeakingUsers(prev=>prev.filter(u=>u!==user));}socket.on(\"speakingStart\",handleSpeakingStart);socket.on(\"speakingStop\",handleSpeakingStop);return()=>{socket.off(\"speakingStart\",handleSpeakingStart);socket.off(\"speakingStop\",handleSpeakingStop);};},[username]);useEffect(()=>{if(currentVoiceChannel){startMicrophone();}else{stopMicrophone();}return()=>{stopMicrophone();};},[currentVoiceChannel,isMuted]);function startMicrophone(){let source;let dataArray;navigator.mediaDevices.getUserMedia({audio:true}).then(stream=>{streamRef.current=stream;const audioContext=new(window.AudioContext||window.webkitAudioContext)();audioContextRef.current=audioContext;source=audioContext.createMediaStreamSource(stream);const analyser=audioContext.createAnalyser();analyser.fftSize=512;analyserRef.current=analyser;const bufferLength=analyser.frequencyBinCount;dataArray=new Uint8Array(bufferLength);source.connect(analyser);const detectSpeech=()=>{analyser.getByteFrequencyData(dataArray);const volume=dataArray.reduce((a,b)=>a+b,0)/bufferLength;setVolumeLevel(volume);if(!isMuted&&currentVoiceChannel){if(volume>20){startSpeaking();}else{stopSpeaking();}}rafIdRef.current=requestAnimationFrame(detectSpeech);};detectSpeech();}).catch(err=>{console.error(\"Mikrofonzugriff fehlgeschlagen:\",err);});}function stopMicrophone(){if(rafIdRef.current)cancelAnimationFrame(rafIdRef.current);if(audioContextRef.current){audioContextRef.current.close();audioContextRef.current=null;}if(streamRef.current){streamRef.current.getTracks().forEach(track=>track.stop());streamRef.current=null;}}function joinChannel(channel){if(!username)return alert(\"Kein Username gesetzt.\");socket.emit(\"joinVoiceChannel\",{channel});setCurrentVoiceChannel(channel);}function leaveChannel(){if(!currentVoiceChannel)return;socket.emit(\"leaveVoiceChannel\",{channel:currentVoiceChannel});setCurrentVoiceChannel(null);stopSpeaking();}function startSpeaking(){socket.emit(\"speakingStart\",{channel:currentVoiceChannel});}function stopSpeaking(){socket.emit(\"speakingStop\",{channel:currentVoiceChannel});}function toggleMute(){setIsMuted(prev=>{const newState=!prev;if(newState)stopSpeaking();return newState;});}function renderAvatar(){if(!userData)return null;if(userData.avatarType===\"generated\"){return/*#__PURE__*/_jsx(\"div\",{className:\"avatar\",style:{backgroundColor:userData.avatarColor||\"#888\",color:\"#fff\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",fontWeight:\"bold\",fontSize:\"14px\"},children:userData.avatarLetter||\"?\"});}if(userData.avatarType===\"upload\"&&userData.avatarImage){return/*#__PURE__*/_jsx(\"img\",{src:userData.avatarImage,alt:\"avatar\",className:\"avatar\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"avatar\",style:{backgroundColor:\"#666\"},children:\"?\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"voice-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"voice-channels\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"channel-list-header\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Voice-Channels\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"channel-list-items\",children:channels.map(ch=>{const users=voiceState[ch]||[];return/*#__PURE__*/_jsxs(\"div\",{className:\"channel-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"voice-channel-header\",children:[/*#__PURE__*/_jsx(\"span\",{children:ch}),currentVoiceChannel===ch?/*#__PURE__*/_jsx(\"button\",{onClick:leaveChannel,children:\"Leave\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>joinChannel(ch),children:\"Join\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"voice-channel-users\",children:users.map(u=>/*#__PURE__*/_jsx(\"div\",{className:\"voice-user\"+(speakingUsers.includes(u.username)?\" voice-user-speaking\":\"\"),children:u.username},u.id))})]},ch);})}),currentVoiceChannel&&/*#__PURE__*/_jsxs(\"div\",{className:\"voice-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleMute,children:isMuted?\"Unmute\":\"Mute\"}),/*#__PURE__*/_jsx(\"div\",{className:\"volume-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"volume-fill\",style:{width:\"\".concat(Math.min(volumeLevel*2,100),\"%\")}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"voice-user-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"voice-avatar\",children:renderAvatar()}),/*#__PURE__*/_jsx(\"div\",{className:\"voice-username\",children:username}),currentVoiceChannel&&/*#__PURE__*/_jsx(\"button\",{className:\"voice-disconnect\",onClick:leaveChannel,children:\"Disconnect\"})]})]});}export default VoicePanel;","map":{"version":3,"names":["React","useEffect","useState","useRef","socket","useVoiceState","jsx","_jsx","jsxs","_jsxs","API_BASE","VoicePanel","_ref","username","channels","setChannels","currentVoiceChannel","setCurrentVoiceChannel","speakingUsers","setSpeakingUsers","userData","setUserData","isMuted","setIsMuted","volumeLevel","setVolumeLevel","voiceState","sessionId","localStorage","getItem","audioContextRef","analyserRef","rafIdRef","streamRef","loadChannels","res","fetch","concat","headers","data","json","ok","err","console","error","loadUser","method","user","emit","handleSpeakingStart","_ref2","prev","includes","handleSpeakingStop","_ref3","filter","u","on","off","startMicrophone","stopMicrophone","source","dataArray","navigator","mediaDevices","getUserMedia","audio","then","stream","current","audioContext","window","AudioContext","webkitAudioContext","createMediaStreamSource","analyser","createAnalyser","fftSize","bufferLength","frequencyBinCount","Uint8Array","connect","detectSpeech","getByteFrequencyData","volume","reduce","a","b","startSpeaking","stopSpeaking","requestAnimationFrame","catch","cancelAnimationFrame","close","getTracks","forEach","track","stop","joinChannel","channel","alert","leaveChannel","toggleMute","newState","renderAvatar","avatarType","className","style","backgroundColor","avatarColor","color","display","alignItems","justifyContent","fontWeight","fontSize","children","avatarLetter","avatarImage","src","alt","map","ch","users","onClick","id","width","Math","min"],"sources":["C:/Users/ericb/mini-discord/frontend/src/components/VoicePanel.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport socket from \"../socket\";\r\nimport { useVoiceState } from \"../context/VoiceContext\";\r\n\r\nconst API_BASE = \"http://localhost:3000\";\r\n\r\nfunction VoicePanel({ username }) {\r\n  const [channels, setChannels] = useState([]);\r\n  const [currentVoiceChannel, setCurrentVoiceChannel] = useState(null);\r\n  const [speakingUsers, setSpeakingUsers] = useState([]);\r\n  const [userData, setUserData] = useState(null);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [volumeLevel, setVolumeLevel] = useState(0);\r\n  const voiceState = useVoiceState();\r\n\r\n  const sessionId = localStorage.getItem(\"sessionId\");\r\n  const audioContextRef = useRef(null);\r\n  const analyserRef = useRef(null);\r\n  const rafIdRef = useRef(null);\r\n  const streamRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    async function loadChannels() {\r\n      if (!sessionId) return;\r\n      try {\r\n        const res = await fetch(`${API_BASE}/api/channels/list`, {\r\n          headers: { \"x-session-id\": sessionId }\r\n        });\r\n        const data = await res.json();\r\n        if (data.ok) setChannels(data.channels);\r\n      } catch (err) {\r\n        console.error(\"Fehler beim Laden der Channels (Voice):\", err);\r\n      }\r\n    }\r\n\r\n    async function loadUser() {\r\n      try {\r\n        const res = await fetch(`${API_BASE}/api/users/me`, {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"x-session-id\": sessionId\r\n          }\r\n        });\r\n        const data = await res.json();\r\n        if (data.ok) setUserData(data.user);\r\n      } catch (err) {\r\n        console.error(\"Fehler beim Laden des Users:\", err);\r\n      }\r\n    }\r\n\r\n    loadChannels();\r\n    loadUser();\r\n  }, [sessionId]);\r\n\r\n  useEffect(() => {\r\n    if (username) {\r\n      socket.emit(\"registerUser\", { username });\r\n    }\r\n\r\n    function handleSpeakingStart({ user }) {\r\n      setSpeakingUsers((prev) =>\r\n        prev.includes(user) ? prev : [...prev, user]\r\n      );\r\n    }\r\n\r\n    function handleSpeakingStop({ user }) {\r\n      setSpeakingUsers((prev) => prev.filter((u) => u !== user));\r\n    }\r\n\r\n    socket.on(\"speakingStart\", handleSpeakingStart);\r\n    socket.on(\"speakingStop\", handleSpeakingStop);\r\n\r\n    return () => {\r\n      socket.off(\"speakingStart\", handleSpeakingStart);\r\n      socket.off(\"speakingStop\", handleSpeakingStop);\r\n    };\r\n  }, [username]);\r\n\r\n  useEffect(() => {\r\n    if (currentVoiceChannel) {\r\n      startMicrophone();\r\n    } else {\r\n      stopMicrophone();\r\n    }\r\n\r\n    return () => {\r\n      stopMicrophone();\r\n    };\r\n  }, [currentVoiceChannel, isMuted]);\r\n\r\n  function startMicrophone() {\r\n    let source;\r\n    let dataArray;\r\n\r\n    navigator.mediaDevices\r\n      .getUserMedia({ audio: true })\r\n      .then((stream) => {\r\n        streamRef.current = stream;\r\n        const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n        audioContextRef.current = audioContext;\r\n\r\n        source = audioContext.createMediaStreamSource(stream);\r\n        const analyser = audioContext.createAnalyser();\r\n        analyser.fftSize = 512;\r\n        analyserRef.current = analyser;\r\n\r\n        const bufferLength = analyser.frequencyBinCount;\r\n        dataArray = new Uint8Array(bufferLength);\r\n\r\n        source.connect(analyser);\r\n\r\n        const detectSpeech = () => {\r\n          analyser.getByteFrequencyData(dataArray);\r\n          const volume = dataArray.reduce((a, b) => a + b, 0) / bufferLength;\r\n          setVolumeLevel(volume);\r\n\r\n          if (!isMuted && currentVoiceChannel) {\r\n            if (volume > 20) {\r\n              startSpeaking();\r\n            } else {\r\n              stopSpeaking();\r\n            }\r\n          }\r\n\r\n          rafIdRef.current = requestAnimationFrame(detectSpeech);\r\n        };\r\n\r\n        detectSpeech();\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Mikrofonzugriff fehlgeschlagen:\", err);\r\n      });\r\n  }\r\n\r\n  function stopMicrophone() {\r\n    if (rafIdRef.current) cancelAnimationFrame(rafIdRef.current);\r\n    if (audioContextRef.current) {\r\n      audioContextRef.current.close();\r\n      audioContextRef.current = null;\r\n    }\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach((track) => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n  }\r\n\r\n  function joinChannel(channel) {\r\n    if (!username) return alert(\"Kein Username gesetzt.\");\r\n    socket.emit(\"joinVoiceChannel\", { channel });\r\n    setCurrentVoiceChannel(channel);\r\n  }\r\n\r\n  function leaveChannel() {\r\n    if (!currentVoiceChannel) return;\r\n    socket.emit(\"leaveVoiceChannel\", { channel: currentVoiceChannel });\r\n    setCurrentVoiceChannel(null);\r\n    stopSpeaking();\r\n  }\r\n\r\n  function startSpeaking() {\r\n    socket.emit(\"speakingStart\", { channel: currentVoiceChannel });\r\n  }\r\n\r\n  function stopSpeaking() {\r\n    socket.emit(\"speakingStop\", { channel: currentVoiceChannel });\r\n  }\r\n\r\n  function toggleMute() {\r\n    setIsMuted((prev) => {\r\n      const newState = !prev;\r\n      if (newState) stopSpeaking();\r\n      return newState;\r\n    });\r\n  }\r\n\r\n  function renderAvatar() {\r\n    if (!userData) return null;\r\n\r\n    if (userData.avatarType === \"generated\") {\r\n      return (\r\n        <div\r\n          className=\"avatar\"\r\n          style={{\r\n            backgroundColor: userData.avatarColor || \"#888\",\r\n            color: \"#fff\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            fontWeight: \"bold\",\r\n            fontSize: \"14px\"\r\n          }}\r\n        >\r\n          {userData.avatarLetter || \"?\"}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (userData.avatarType === \"upload\" && userData.avatarImage) {\r\n      return (\r\n        <img\r\n          src={userData.avatarImage}\r\n          alt=\"avatar\"\r\n          className=\"avatar\"\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"avatar\" style={{ backgroundColor: \"#666\" }}>\r\n        ?\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"voice-panel\">\r\n      <div className=\"voice-channels\">\r\n        <div className=\"channel-list-header\">\r\n          <strong>Voice-Channels</strong>\r\n        </div>\r\n        <div className=\"channel-list-items\">\r\n          {channels.map((ch) => {\r\n            const users = voiceState[ch] || [];\r\n            return (\r\n              <div key={ch} className=\"channel-item\">\r\n                <div className=\"voice-channel-header\">\r\n                  <span>{ch}</span>\r\n                  {currentVoiceChannel === ch ? (\r\n                    <button onClick={leaveChannel}>Leave</button>\r\n                  ) : (\r\n                    <button onClick={() => joinChannel(ch)}>Join</button>\r\n                  )}\r\n                </div>\r\n                <div className=\"voice-channel-users\">\r\n                  {users.map((u) => (\r\n                    <div\r\n                      key={u.id}\r\n                      className={\r\n                        \"voice-user\" +\r\n                        (speakingUsers.includes(u.username)\r\n                          ? \" voice-user-speaking\"\r\n                          : \"\")\r\n                      }\r\n                    >\r\n                      {u.username}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {currentVoiceChannel && (\r\n          <div className=\"voice-controls\">\r\n            <button onClick={toggleMute}>\r\n              {isMuted ? \"Unmute\" : \"Mute\"}\r\n            </button>\r\n            <div className=\"volume-bar\">\r\n              <div\r\n                className=\"volume-fill\"\r\n                style={{ width: `${Math.min(volumeLevel * 2, 100)}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"voice-user-info\">\r\n        <div className=\"voice-avatar\">{renderAvatar()}</div>\r\n        <div className=\"voice-username\">{username}</div>\r\n        {currentVoiceChannel && (\r\n          <button className=\"voice-disconnect\" onClick={leaveChannel}>\r\n            Disconnect\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VoicePanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ericb\\\\mini-discord\\\\frontend\\\\src\\\\components\\\\UserList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { socket } from \"../socket\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UserList() {\n  _s();\n  const [users, setUsers] = useState({});\n  const [voiceChannels, setVoiceChannels] = useState({});\n  const [speakingUsers, setSpeakingUsers] = useState({});\n  useEffect(() => {\n    socket.on(\"avatarUpdate\", users => {\n      setUsers(users);\n    });\n    socket.on(\"voiceChannelUpdate\", voiceChannels => {\n      setVoiceChannels(voiceChannels);\n    });\n    socket.on(\"speakingStart\", ({\n      user\n    }) => {\n      setSpeakingUsers(prev => ({\n        ...prev,\n        [user]: true\n      }));\n    });\n    socket.on(\"speakingStop\", ({\n      user\n    }) => {\n      setSpeakingUsers(prev => ({\n        ...prev,\n        [user]: false\n      }));\n    });\n    return () => {\n      socket.off(\"avatarUpdate\");\n      socket.off(\"voiceChannelUpdate\");\n      socket.off(\"speakingStart\");\n      socket.off(\"speakingStop\");\n    };\n  }, []);\n\n  // Alphabetisch sortierte Userliste\n  const sortedUsers = Object.keys(users).sort((a, b) => a.localeCompare(b));\n\n  // Für jeden User herausfinden, in welchem Voicechannel er ist\n  const getUserVoiceChannel = username => {\n    for (const ch in voiceChannels) {\n      if (voiceChannels[ch].some(u => u.username === username)) {\n        return ch;\n      }\n    }\n    return null;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 10,\n      color: \"white\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        opacity: 0.6,\n        marginBottom: 10\n      },\n      children: \"USERS ONLINE\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), sortedUsers.map(username => {\n      const av = users[username];\n      const isSpeaking = speakingUsers[username];\n      const vc = getUserVoiceChannel(username);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          alignItems: \"center\",\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: isSpeaking ? \"speaking-ring\" : undefined,\n          style: {\n            width: 28,\n            height: 28,\n            borderRadius: \"50%\",\n            overflow: \"hidden\",\n            marginRight: 8,\n            background: av.avatarType === \"default\" ? av.avatarColor : \"transparent\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            fontWeight: \"bold\",\n            fontSize: 14\n          },\n          children: av.avatarType === \"image\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: av.avatarImage,\n            className: \"avatar\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this) : av.avatarLetter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1\n          },\n          children: username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 12,\n            opacity: 0.7\n          },\n          children: vc ? `in ${vc}` : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)]\n      }, username, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n_s(UserList, \"LkJJ2qaNWUzPAE4QTBZLlucY1tg=\");\n_c = UserList;\nvar _c;\n$RefreshReg$(_c, \"UserList\");","map":{"version":3,"names":["React","useEffect","useState","socket","jsxDEV","_jsxDEV","UserList","_s","users","setUsers","voiceChannels","setVoiceChannels","speakingUsers","setSpeakingUsers","on","user","prev","off","sortedUsers","Object","keys","sort","a","b","localeCompare","getUserVoiceChannel","username","ch","some","u","style","padding","color","children","opacity","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","map","av","isSpeaking","vc","display","alignItems","className","undefined","width","height","borderRadius","overflow","marginRight","background","avatarType","avatarColor","justifyContent","fontWeight","fontSize","src","avatarImage","alt","avatarLetter","flex","_c","$RefreshReg$"],"sources":["C:/Users/ericb/mini-discord/frontend/src/components/UserList.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { socket } from \"../socket\";\r\n\r\nexport default function UserList() {\r\n  const [users, setUsers] = useState({});\r\n  const [voiceChannels, setVoiceChannels] = useState({});\r\n  const [speakingUsers, setSpeakingUsers] = useState({});\r\n\r\n  useEffect(() => {\r\n    socket.on(\"avatarUpdate\", (users) => {\r\n      setUsers(users);\r\n    });\r\n\r\n    socket.on(\"voiceChannelUpdate\", (voiceChannels) => {\r\n      setVoiceChannels(voiceChannels);\r\n    });\r\n\r\n    socket.on(\"speakingStart\", ({ user }) => {\r\n      setSpeakingUsers((prev) => ({ ...prev, [user]: true }));\r\n    });\r\n\r\n    socket.on(\"speakingStop\", ({ user }) => {\r\n      setSpeakingUsers((prev) => ({ ...prev, [user]: false }));\r\n    });\r\n\r\n    return () => {\r\n      socket.off(\"avatarUpdate\");\r\n      socket.off(\"voiceChannelUpdate\");\r\n      socket.off(\"speakingStart\");\r\n      socket.off(\"speakingStop\");\r\n    };\r\n  }, []);\r\n\r\n  // Alphabetisch sortierte Userliste\r\n  const sortedUsers = Object.keys(users).sort((a, b) =>\r\n    a.localeCompare(b)\r\n  );\r\n\r\n  // Für jeden User herausfinden, in welchem Voicechannel er ist\r\n  const getUserVoiceChannel = (username) => {\r\n    for (const ch in voiceChannels) {\r\n      if (voiceChannels[ch].some((u) => u.username === username)) {\r\n        return ch;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: 10, color: \"white\" }}>\r\n      <div style={{ opacity: 0.6, marginBottom: 10 }}>USERS ONLINE</div>\r\n\r\n      {sortedUsers.map((username) => {\r\n        const av = users[username];\r\n        const isSpeaking = speakingUsers[username];\r\n        const vc = getUserVoiceChannel(username);\r\n\r\n        return (\r\n          <div\r\n            key={username}\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              marginBottom: 10\r\n            }}\r\n          >\r\n            <div\r\n              className={isSpeaking ? \"speaking-ring\" : undefined}\r\n              style={{\r\n                width: 28,\r\n                height: 28,\r\n                borderRadius: \"50%\",\r\n                overflow: \"hidden\",\r\n                marginRight: 8,\r\n                background:\r\n                  av.avatarType === \"default\"\r\n                    ? av.avatarColor\r\n                    : \"transparent\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                fontWeight: \"bold\",\r\n                fontSize: 14\r\n              }}\r\n            >\r\n              {av.avatarType === \"image\" ? (\r\n                <img src={av.avatarImage} className=\"avatar\" alt=\"\" />\r\n              ) : (\r\n                av.avatarLetter\r\n              )}\r\n            </div>\r\n\r\n            <div style={{ flex: 1 }}>{username}</div>\r\n\r\n            {/* Rechts nur anzeigen, wenn User im Voicechannel ist */}\r\n            <div style={{ fontSize: 12, opacity: 0.7 }}>\r\n              {vc ? `in ${vc}` : \"\"}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
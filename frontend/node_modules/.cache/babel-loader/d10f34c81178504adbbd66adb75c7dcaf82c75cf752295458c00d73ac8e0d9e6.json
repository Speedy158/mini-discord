{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ericb\\\\mini-discord\\\\frontend\\\\src\\\\components\\\\UserList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { socket } from \"../socket\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UserList() {\n  _s();\n  const [users, setUsers] = useState({});\n  const [voiceChannels, setVoiceChannels] = useState({});\n  const [speakingUsers, setSpeakingUsers] = useState({});\n\n  // ---------------- AVATAR UPDATE ----------------\n  useEffect(() => {\n    const handleAvatar = u => setUsers(u);\n    socket.on(\"avatarUpdate\", handleAvatar);\n    return () => {\n      socket.off(\"avatarUpdate\", handleAvatar);\n    };\n  }, []);\n\n  // ---------------- VOICE CHANNEL UPDATE ----------------\n  useEffect(() => {\n    const handleVC = channels => {\n      setVoiceChannels(channels);\n    };\n    socket.on(\"voiceChannelUpdate\", handleVC);\n    return () => {\n      socket.off(\"voiceChannelUpdate\", handleVC);\n    };\n  }, []);\n\n  // ---------------- SPEAKING EVENTS ----------------\n  useEffect(() => {\n    const handleStart = ({\n      user\n    }) => {\n      setSpeakingUsers(prev => ({\n        ...prev,\n        [user]: true\n      }));\n    };\n    const handleStop = ({\n      user\n    }) => {\n      setSpeakingUsers(prev => ({\n        ...prev,\n        [user]: false\n      }));\n    };\n    socket.on(\"speakingStart\", handleStart);\n    socket.on(\"speakingStop\", handleStop);\n    return () => {\n      socket.off(\"speakingStart\", handleStart);\n      socket.off(\"speakingStop\", handleStop);\n    };\n  }, []);\n\n  // ---------------- USER SORTING ----------------\n  const sortedUsers = Object.keys(users).sort((a, b) => a.localeCompare(b));\n\n  // ---------------- FIND USER VOICE CHANNEL ----------------\n  const getUserVoiceChannel = username => {\n    for (const ch in voiceChannels) {\n      if (voiceChannels[ch].some(u => u.username === username)) {\n        return ch;\n      }\n    }\n    return null;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 10,\n      color: \"white\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        opacity: 0.6,\n        marginBottom: 10\n      },\n      children: \"USERS ONLINE\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), sortedUsers.map(username => {\n      const av = users[username];\n      const isSpeaking = speakingUsers[username];\n      const vc = getUserVoiceChannel(username);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          alignItems: \"center\",\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: isSpeaking ? \"speaking-ring\" : \"\",\n          style: {\n            width: 28,\n            height: 28,\n            borderRadius: \"50%\",\n            overflow: \"hidden\",\n            marginRight: 8,\n            background: av.avatarType === \"default\" ? av.avatarColor : \"transparent\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            fontWeight: \"bold\",\n            fontSize: 14\n          },\n          children: av.avatarType === \"image\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: av.avatarImage,\n            className: \"avatar\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 17\n          }, this) : av.avatarLetter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1\n          },\n          children: username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 12,\n            opacity: 0.7\n          },\n          children: vc ? `in ${vc}` : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this)]\n      }, username, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(UserList, \"eDNCav4AgrnqeQs/oNSv6bZ0Dzg=\");\n_c = UserList;\nvar _c;\n$RefreshReg$(_c, \"UserList\");","map":{"version":3,"names":["React","useEffect","useState","socket","jsxDEV","_jsxDEV","UserList","_s","users","setUsers","voiceChannels","setVoiceChannels","speakingUsers","setSpeakingUsers","handleAvatar","u","on","off","handleVC","channels","handleStart","user","prev","handleStop","sortedUsers","Object","keys","sort","a","b","localeCompare","getUserVoiceChannel","username","ch","some","style","padding","color","children","opacity","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","map","av","isSpeaking","vc","display","alignItems","className","width","height","borderRadius","overflow","marginRight","background","avatarType","avatarColor","justifyContent","fontWeight","fontSize","src","avatarImage","alt","avatarLetter","flex","_c","$RefreshReg$"],"sources":["C:/Users/ericb/mini-discord/frontend/src/components/UserList.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { socket } from \"../socket\";\r\n\r\nexport default function UserList() {\r\n  const [users, setUsers] = useState({});\r\n  const [voiceChannels, setVoiceChannels] = useState({});\r\n  const [speakingUsers, setSpeakingUsers] = useState({});\r\n\r\n  // ---------------- AVATAR UPDATE ----------------\r\n  useEffect(() => {\r\n    const handleAvatar = (u) => setUsers(u);\r\n\r\n    socket.on(\"avatarUpdate\", handleAvatar);\r\n\r\n    return () => {\r\n      socket.off(\"avatarUpdate\", handleAvatar);\r\n    };\r\n  }, []);\r\n\r\n  // ---------------- VOICE CHANNEL UPDATE ----------------\r\n  useEffect(() => {\r\n    const handleVC = (channels) => {\r\n      setVoiceChannels(channels);\r\n    };\r\n\r\n    socket.on(\"voiceChannelUpdate\", handleVC);\r\n\r\n    return () => {\r\n      socket.off(\"voiceChannelUpdate\", handleVC);\r\n    };\r\n  }, []);\r\n\r\n  // ---------------- SPEAKING EVENTS ----------------\r\n  useEffect(() => {\r\n    const handleStart = ({ user }) => {\r\n      setSpeakingUsers((prev) => ({ ...prev, [user]: true }));\r\n    };\r\n\r\n    const handleStop = ({ user }) => {\r\n      setSpeakingUsers((prev) => ({ ...prev, [user]: false }));\r\n    };\r\n\r\n    socket.on(\"speakingStart\", handleStart);\r\n    socket.on(\"speakingStop\", handleStop);\r\n\r\n    return () => {\r\n      socket.off(\"speakingStart\", handleStart);\r\n      socket.off(\"speakingStop\", handleStop);\r\n    };\r\n  }, []);\r\n\r\n  // ---------------- USER SORTING ----------------\r\n  const sortedUsers = Object.keys(users).sort((a, b) =>\r\n    a.localeCompare(b)\r\n  );\r\n\r\n  // ---------------- FIND USER VOICE CHANNEL ----------------\r\n  const getUserVoiceChannel = (username) => {\r\n    for (const ch in voiceChannels) {\r\n      if (voiceChannels[ch].some((u) => u.username === username)) {\r\n        return ch;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: 10, color: \"white\" }}>\r\n      <div style={{ opacity: 0.6, marginBottom: 10 }}>USERS ONLINE</div>\r\n\r\n      {sortedUsers.map((username) => {\r\n        const av = users[username];\r\n        const isSpeaking = speakingUsers[username];\r\n        const vc = getUserVoiceChannel(username);\r\n\r\n        return (\r\n          <div\r\n            key={username}\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              marginBottom: 10\r\n            }}\r\n          >\r\n            {/* Avatar */}\r\n            <div\r\n              className={isSpeaking ? \"speaking-ring\" : \"\"}\r\n              style={{\r\n                width: 28,\r\n                height: 28,\r\n                borderRadius: \"50%\",\r\n                overflow: \"hidden\",\r\n                marginRight: 8,\r\n                background:\r\n                  av.avatarType === \"default\"\r\n                    ? av.avatarColor\r\n                    : \"transparent\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                fontWeight: \"bold\",\r\n                fontSize: 14\r\n              }}\r\n            >\r\n              {av.avatarType === \"image\" ? (\r\n                <img src={av.avatarImage} className=\"avatar\" alt=\"\" />\r\n              ) : (\r\n                av.avatarLetter\r\n              )}\r\n            </div>\r\n\r\n            {/* Username */}\r\n            <div style={{ flex: 1 }}>{username}</div>\r\n\r\n            {/* Voice Channel */}\r\n            <div style={{ fontSize: 12, opacity: 0.7 }}>\r\n              {vc ? `in ${vc}` : \"\"}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}